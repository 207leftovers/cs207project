Generating LALR tables
Exception in callback trigger_callback_maker.<locals>.callback_(<Task finishe...135623730951]>) at /Users/Avery/Dropbox/Harvard/CS207/cs207project/tsdb/tsdb_server.py:14
handle: <Handle trigger_callback_maker.<locals>.callback_(<Task finishe...135623730951]>) at /Users/Avery/Dropbox/Harvard/CS207/cs207project/tsdb/tsdb_server.py:14>
Traceback (most recent call last):
  File "/Users/Avery/anaconda/envs/py35/lib/python3.5/asyncio/events.py", line 125, in _run
    self._callback(*self._args)
  File "/Users/Avery/Dropbox/Harvard/CS207/cs207project/tsdb/tsdb_server.py", line 17, in callback_
    calltomake(pk, dict(zip(target, result)))
TypeError: upsert_meta() missing 1 required positional argument: 'meta'
Exception in callback _SelectorSocketTransport._read_ready()
handle: <Handle _SelectorSocketTransport._read_ready()>
Traceback (most recent call last):
  File "/Users/Avery/anaconda/envs/py35/lib/python3.5/asyncio/events.py", line 125, in _run
    self._callback(*self._args)
  File "/Users/Avery/anaconda/envs/py35/lib/python3.5/asyncio/selector_events.py", line 671, in _read_ready
    self._protocol.data_received(data)
  File "/Users/Avery/Dropbox/Harvard/CS207/cs207project/tsdb/tsdb_server.py", line 201, in data_received
    response = self._select(op)
  File "/Users/Avery/Dropbox/Harvard/CS207/cs207project/tsdb/tsdb_server.py", line 74, in _select
    loids, fields = self.server.db.select(op['tid'], op['md'], op['fields'], op['additional'])
  File "/Users/Avery/Dropbox/Harvard/CS207/cs207project/tsdb/persistentdb.py", line 354, in select
    matched_field[field] = self._trees['pk'].get_as_row(pk).row[field]
KeyError: 'ts'
S> Starting Server on port: 9999
S> Starting TSDB server on port 9999
S> connection made
S> data received [31]: b'\x1f\x00\x00\x00{"op": "begin_transaction"}'
{"op": "begin_transaction"}
S> Begin Transaction
S> connection lost
S> connection made
S> data received [115]: b's\x00\x00\x00{"arg": null, "op": "add_trigger", "tid": 1, "target": ["mean", "std"], "onwhat": "insert_ts", "proc": "stats"}'
{"arg": null, "op": "add_trigger", "tid": 1, "target": ["mean", "std"], "onwhat": "insert_ts", "proc": "stats"}
Adding triggers
S> connection lost
S> connection made
S> data received [104]: b'h\x00\x00\x00{"op": "insert_ts", "ts": [[1.0, 2.0, 3.0, 2.0, 1.0], [0.0, 1.0, 2.0, 3.0, 4.0]], "pk": 1, "tid": 1}'
{"op": "insert_ts", "ts": [[1.0, 2.0, 3.0, 2.0, 1.0], [0.0, 1.0, 2.0, 3.0, 4.0]], "pk": 1, "tid": 1}
S> Insert TS:  1
S> list of triggers to run [('stats', <function main at 0x1044a7a60>, None, ['mean', 'std'])]
S> connection lost
S> connection made
S> data received [108]: b'l\x00\x00\x00{"md": {"pk": {"==": 1}}, "op": "select", "additional": null, "fields": ["ts", "mean", "std"], "tid": 1}'
{"md": {"pk": {"==": 1}}, "op": "select", "additional": null, "fields": ["ts", "mean", "std"], "tid": 1}
S> Exiting.
